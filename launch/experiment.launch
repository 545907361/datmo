<launch>

  <arg name="bag" />
  <param name="use_sim_time" value="true" />
    <!--<include file="$(find localization)/launch/localization.launch"/>-->
    <!--<include file="$(find localization)/launch/mocap_localization.launch"/>-->

    <node pkg="rosbag" type="play" name="player" required="true" output="screen" args="-s 17 -r 0.2 -u 1.2 -l --clock /home/kostas/experiments/dsv/$(arg bag)"/>
  <!--<node pkg="rosbag" type="play" name="player" required="true" output="screen" args=" -r 1 -clock /home/kostas/experiments/dsv/$(arg bag)"/>-->
  <node pkg="rosbag" type="record" name="recorder" output="screen" args="-O /home/kostas/results/experiment/overtakes.bag /tf /tracks/mean /tracks/mean_kf /tracks/box_kf /tracks/box_ukf /ego_pose /red_pose" />

  <node type="rviz" name="rviz" pkg="rviz" args="-d $(find datmo)/config/experiment.rviz" />
  <node pkg="tf2_ros" type="static_transform_publisher" name="link_laser" args="-0.13 0 0 0 0 0 /ego_pose /laser" />

   <node pkg="datmo" type="datmo" name="datmo" >
      <param name="max_cluster_size" value="50" />
      <param name="write_execution_times" value="true" />
      <param name="lidar_frame" value="laser" />
      <param name="world_frame" value="map" />
      <param name="threshold_distance" value="0.17" />
      <param name="euclidean_distance" value="0.45" />
      <param name="pub_markers" value="true" />
   </node>

</launch>
